{"ast":null,"code":"var _jsxFileName = \"/home/hlfuser/Bureau/HLF_project_jyen/bceao-blockchain-app/frontend/src/components/ActiveClientList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getActiveClients, getClientHistory } from '../services/api';\nimport ClientListBase from './common/ClientListBase';\nimport ClientHistoryModal from './common/ClientHistoryModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ActiveClientList() {\n  _s();\n  const [clients, setClients] = useState([]);\n  const [queryInfo, setQueryInfo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // États pour le modal d'historique\n  const [showHistory, setShowHistory] = useState(false);\n  const [selectedClientHistory, setSelectedClientHistory] = useState(null);\n  const [historyLoading, setHistoryLoading] = useState(false);\n  useEffect(() => {\n    loadClients();\n  }, []);\n  const loadClients = async () => {\n    try {\n      setLoading(true);\n      const response = await getActiveClients();\n      if (response && response.clients) {\n        setClients(response.clients);\n        setQueryInfo(response.queryInfo);\n      } else {\n        setClients([]);\n        console.error('Format de réponse inattendu:', response);\n      }\n    } catch (err) {\n      console.error('Erreur lors du chargement des clients:', err);\n      setError('Erreur lors du chargement des clients');\n      setClients([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSearch = useCallback(({\n    ubi,\n    firstName,\n    lastName\n  }) => {\n    let filtered = [...clients];\n\n    // Filtrer par UBI\n    if (ubi) {\n      filtered = filtered.filter(client => client.UBI.toLowerCase().includes(ubi.toLowerCase()));\n    }\n\n    // Filtrer par Nom\n    if (lastName) {\n      filtered = filtered.filter(client => client.lastName.toLowerCase().includes(lastName.toLowerCase()));\n    }\n\n    // Filtrer par Prénom\n    if (firstName) {\n      filtered = filtered.filter(client => client.firstName.toLowerCase().includes(firstName.toLowerCase()));\n    }\n    setFilteredClients(filtered);\n\n    // Mettre à jour queryInfo avec les résultats filtrés\n    if (queryInfo) {\n      setQueryInfo(prev => ({\n        ...prev,\n        totalResults: filtered.length\n      }));\n    }\n  }, [clients, queryInfo]);\n  const handleShowHistory = async ubi => {\n    try {\n      setHistoryLoading(true);\n      const history = await getClientHistory(ubi);\n      setSelectedClientHistory(history);\n      setShowHistory(true);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ClientListBase, {\n      title: \"Clients Actifs\",\n      clients: clients,\n      queryInfo: queryInfo,\n      loading: loading,\n      error: error,\n      onShowHistory: handleShowHistory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), showHistory && /*#__PURE__*/_jsxDEV(ClientHistoryModal, {\n      history: selectedClientHistory,\n      onClose: () => {\n        setShowHistory(false);\n        setSelectedClientHistory(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), historyLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(ActiveClientList, \"CEobHdXqt5Jp+tOJuswL1NPBSOU=\");\n_c = ActiveClientList;\nvar _c;\n$RefreshReg$(_c, \"ActiveClientList\");","map":{"version":3,"names":["React","useState","useEffect","getActiveClients","getClientHistory","ClientListBase","ClientHistoryModal","jsxDEV","_jsxDEV","Fragment","_Fragment","ActiveClientList","_s","clients","setClients","queryInfo","setQueryInfo","loading","setLoading","error","setError","showHistory","setShowHistory","selectedClientHistory","setSelectedClientHistory","historyLoading","setHistoryLoading","loadClients","response","console","err","handleSearch","useCallback","ubi","firstName","lastName","filtered","filter","client","UBI","toLowerCase","includes","setFilteredClients","prev","totalResults","length","handleShowHistory","history","children","title","onShowHistory","fileName","_jsxFileName","lineNumber","columnNumber","onClose","className","_c","$RefreshReg$"],"sources":["/home/hlfuser/Bureau/HLF_project_jyen/bceao-blockchain-app/frontend/src/components/ActiveClientList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getActiveClients, getClientHistory } from '../services/api';\nimport ClientListBase from './common/ClientListBase';\nimport ClientHistoryModal from './common/ClientHistoryModal';\n\nexport default function ActiveClientList() {\n  const [clients, setClients] = useState([]);\n  const [queryInfo, setQueryInfo] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // États pour le modal d'historique\n  const [showHistory, setShowHistory] = useState(false);\n  const [selectedClientHistory, setSelectedClientHistory] = useState(null);\n  const [historyLoading, setHistoryLoading] = useState(false);\n\n  useEffect(() => {\n    loadClients();\n  }, []);\n\n  const loadClients = async () => {\n    try {\n      setLoading(true);\n      const response = await getActiveClients();\n      \n      if (response && response.clients) {\n        setClients(response.clients);\n        setQueryInfo(response.queryInfo);\n      } else {\n        setClients([]);\n        console.error('Format de réponse inattendu:', response);\n      }\n    } catch (err) {\n      console.error('Erreur lors du chargement des clients:', err);\n      setError('Erreur lors du chargement des clients');\n      setClients([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = useCallback(({ ubi, firstName, lastName }) => {\n      let filtered = [...clients];\n\n      // Filtrer par UBI\n      if (ubi) {\n          filtered = filtered.filter(client => \n              client.UBI.toLowerCase().includes(ubi.toLowerCase())\n          );\n      }\n\n      // Filtrer par Nom\n      if (lastName) {\n          filtered = filtered.filter(client => \n              client.lastName.toLowerCase().includes(lastName.toLowerCase())\n          );\n      }\n\n      // Filtrer par Prénom\n      if (firstName) {\n          filtered = filtered.filter(client => \n              client.firstName.toLowerCase().includes(firstName.toLowerCase())\n          );\n      }\n\n      setFilteredClients(filtered);\n\n      // Mettre à jour queryInfo avec les résultats filtrés\n      if (queryInfo) {\n          setQueryInfo(prev => ({\n              ...prev,\n              totalResults: filtered.length\n          }));\n      }\n  }, [clients, queryInfo]);\n\n  const handleShowHistory = async (ubi) => {\n    try {\n      setHistoryLoading(true);\n      const history = await getClientHistory(ubi);\n      setSelectedClientHistory(history);\n      setShowHistory(true);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setHistoryLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <ClientListBase\n        title=\"Clients Actifs\"\n        clients={clients}\n        queryInfo={queryInfo}\n        loading={loading}\n        error={error}\n        onShowHistory={handleShowHistory}\n      />\n      \n      {showHistory && (\n        <ClientHistoryModal\n          history={selectedClientHistory}\n          onClose={() => {\n            setShowHistory(false);\n            setSelectedClientHistory(null);\n          }}\n        />\n      )}\n\n      {historyLoading && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white\"></div>\n        </div>\n      )}\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}